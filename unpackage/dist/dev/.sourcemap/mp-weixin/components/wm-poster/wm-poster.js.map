{"version":3,"sources":["webpack:///C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue?9950","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue?1d23","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue?57d6","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue?9d65","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue"],"names":["_this","name","props","CanvasID","Type","String","default","imgSrc","QrSrc","Title","TitleColor","LineType","Boolean","PriceTxt","PriceColor","OriginalTxt","OriginalColor","Width","CanvasBg","Referrer","ViewDetails","data","canvasW","canvasH","canvasImgSrc","ctx","thisImgSrc","methods","OnCanvas","uni","createCanvasContext","C_W","upx2px","C_P","C_Q","_strlineW","getImageInfo","_imgInfo","_QrCode","r","width","height","q","imgW","Math","floor","setFillStyle","fillRect","drawImage","path","_strLastIndex","_strHeight","_num","IHeight","setFontSize","fillText","measureText","setTimeout","draw","ret","getNewImage","canvasToTempFilePath","canvasId","success","res","tempFilePath","getApp","globalData","generateImgSrc","console","log","Promise","resolve","errs","src","image","fail","err","quality","complete","$emit","mounted"],"mappings":"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","file":"components/wm-poster/wm-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wm-poster.vue?vue&type=template&id=0b564ad7&\"\nvar renderjs\nimport script from \"./wm-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wm-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0b564ad7')) {\n      api.createRecord('0b564ad7', component.options)\n    } else {\n      api.reload('0b564ad7', component.options)\n    }\n    module.hot.accept(\"./wm-poster.vue?vue&type=template&id=0b564ad7&\", function () {\n      api.rerender('0b564ad7', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Documents/HBuilderProjects/uni/components/wm-poster/wm-poster.vue\"\nexport default component.exports","export * from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=template&id=0b564ad7&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\迅雷下载\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n\tvar _this;\nexport default {\n\tname: 'wm-poster',\n\tprops: {\n\t\tCanvasID:{\t\t//CanvasID 等同于 canvas-id\n\t\t\tType:String,\n\t\t\tdefault:'PosterCanvas'\n\t\t},\n\t\timgSrc:{\t\t//展示图\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tQrSrc:{\t\t\t//二维码\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitle:{\t\t\t//文本内容\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitleColor:{\t//标题颜色\n\t\t\tType:String,\n\t\t\tdefault:'#333333'\n\t\t},\n\t\tLineType:{\t\t//标题显示行数\t\t（注超出2行显示会导致画布布局絮乱）\n\t\t\tType:[String,Boolean],\n\t\t\tdefault:true\n\t\t},\n\t\tPriceTxt:{\t\t//价格值\n\t\t\tType:String,\n\t\t\tdefault:'99.99'\n\t\t},\n\t\tPriceColor:{\t//价格颜色\n\t\t\tType:String,\n\t\t\tdefault:'#e31d1a'\n\t\t},\n\t\tOriginalTxt:{\t//原价值\n\t\t\tType:String,\n\t\t\tdefault:'199.99'\n\t\t},\n\t\tOriginalColor:{\t//默认颜色（如原价与扫描二维码颜色）\n\t\t\tType:String,\n\t\t\tdefault:'#b8b8b8'\n\t\t},\n\t\tWidth:{\t\t\t//画布宽度  (高度根据图片比例计算 单位upx)\n\t\t\tType:String,\n\t\t\tdefault:750\n\t\t},\n\t\tCanvasBg:{\t\t//canvas画布背景色\n\t\t\tType:String,\t\t\n\t\t\tdefault:'#ffffff'\n\t\t},\n\t\tReferrer:{\t\t//推荐人信息\n\t\t\tType:String,\n\t\t\tdefault:'quitter推荐给你'\n\t\t},\n\t\tViewDetails:{\t//描述提示文字\n\t\t\tType:String,\n\t\t\tdefault:'长按或扫描识别二维码'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW:0,\n\t\t\tcanvasH: 0,\n\t\t\tcanvasImgSrc:'',\n\t\t\tctx:null,\n\t\t\tthisImgSrc:''\n\t\t};\n\t},\n\tmethods: {\n\t\tasync OnCanvas() {\n\t\t\t_this.ctx = uni.createCanvasContext(_this.CanvasID,this);//把this.ctx赋值为\n\t\t\tconst C_W = uni.upx2px(_this.Width), //canvas宽度\n\t\t\t\tC_P = uni.upx2px(30), //canvas Paddng 间距\n\t\t\t\tC_Q = uni.upx2px(150); //二维码或太阳码宽高\n\t\t\tlet _strlineW = 0; //文本宽度\n\t\t\tlet _imgInfo = await _this.getImageInfo({ imgSrc: _this.imgSrc }); //广告图\n\t\t\tlet _QrCode = await _this.getImageInfo({ imgSrc: _this.QrSrc }); //二维码或太阳码\n\t\t\tlet r = [_imgInfo.width, _imgInfo.height];//r[]对应imginfo\n\t\t\tlet q = [_QrCode.width, _QrCode.height];//q[]对应qrCodeInfo\n\t\t\tlet imgW = C_W - C_P * 2;//imgW=canvas宽度减去间距*2\n\t\t\tif (r[0] != imgW) {\n\t\t\t\tr[1] = Math.floor((imgW / r[0]) * r[1]);//这是做的一个等比缩放 两边同时乘以imgW/r[0]则r[0]就成了imgW\n\t\t\t\tr[0] = imgW;//插件主做了对图片宽高的严格限制\n\t\t\t}//首先确保了主图的宽高\n\t\t\tif (q[0] != C_Q) {\n\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\n\t\t\t\tq[0] = C_Q;\n\t\t\t}//对于副图也做了同样的严格限制\n\t\t\t_this.canvasW = C_W;\n\t\t\t_this.canvasH = r[1] + q[1] + 110;//定义canvasHeight\n\t\t\t_this.ctx.setFillStyle(_this.CanvasBg); //canvas背景颜色\n\t\t\t_this.ctx.fillRect(0, 0, C_W, _this.canvasH); //canvas画布大小\n\t\t\t//添加图片展示\n\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, C_P, r[0], r[1]);/*\n\t\t\t在间距间距处以合适尺寸绘制图像\n\t\t\t在画布上定位图像，并规定图像的宽度和高度：\n\t\t\tcontext.drawImage(img,x,y,width,height);\n\t\t\tx\t在画布上放置图像的 x 坐标位置。\n\t\t\ty\t在画布上放置图像的 y 坐标位置。\n\t\t\twidth\t可选。要使用的图像的宽度。（伸展或缩小图像）\n\t\t\theight\t可选。要使用的图像的高度。（伸展或缩小图像）\n\t\t\t*/\n\t\t\t//添加图片展示 end\n\t\t\t//设置文本\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(28)); //设置标题字体大小\n\t\t\t// _this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\n\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\tlet _strHeight = r[1] + C_P * 2 + 10; //绘制字体距离canvas顶部的初始高度\n\t\t\tlet _num=1;\n\t\t\t// for (let i = 0; i < _this.Title.length; i++) {\n\t\t\t// \t_strlineW += _this.ctx.measureText(_this.Title[i]).width;//测量文本尺寸信息，目前仅返回文本宽度 \n\t\t\t// \tif (_strlineW > r[0]) {//let _strlineW就是为了进行换行的判断和处理 该换行之类的才会进入这个if\n\t\t\t// \t\tif(_num == 2&&_this.LineType){\n\t\t\t// \t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t// \t\t\t//否则进行普通的换行 height+=20\n\t\t\t// \t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i-8)+'...', C_P, _strHeight);\n\t\t\t// \t\t\t//要用fillText后 文本才会填入canvas的ctx中\n\t\t\t// \t\t\t_strlineW = 0;\n\t\t\t// \t\t\t_strLastIndex = i;\n\t\t\t// \t\t\t_num++;\n\t\t\t// \t\t\tbreak;\n\t\t\t// \t\t}else{\n\t\t\t// \t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_P, _strHeight);\n\t\t\t// \t\t\t_strlineW = 0;\n\t\t\t// \t\t\t_strHeight += 20;\n\t\t\t// \t\t\t_strLastIndex = i;\n\t\t\t// \t\t\t_num++;\n\t\t\t// \t\t}\n\t\t\t// \t}else if (i == _this.Title.length - 1) {\n\t\t\t// \t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_P, _strHeight);\n\t\t\t// \t\t_strlineW = 0;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t_this.ctx.drawImage(_QrCode.path,C_P,_strHeight, q[0], q[1]);\n\t\t\tlet IHeight=_strHeight\n\t\t\t//设置文本 end\n\t\t\t//设置价格\n\t\t\t_strlineW = C_P;\n\t\t\t_strHeight += uni.upx2px(60);\n\t\t\tif(_num==1){\n\t\t\t\t_strHeight += 20;\t//单行标题时占位符 即前面的文本标题只有一行\n\t\t\t}\n\t\t\t\n\t\t\tif(_this.PriceTxt !=''){\t//判断是否有销售价格\n\t\t\t\t_this.ctx.setFillStyle(_this.PriceColor);//设置price文本颜色\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(38));\n\t\t\t\t_this.ctx.fillText(_this.PriceTxt, _strlineW+C_Q+C_P, _strHeight-20); //商品价格\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.PriceTxt).width + uni.upx2px(10);\n\t\t\t}\n\t\t\tif(_this.PriceTxt !='' && _this.OriginalTxt !=''){\t//判断是否有销售价格且原价\n\t\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t\t_this.ctx.fillText(_this.OriginalTxt, _strlineW, _strHeight); //商品原价\n\t\t\t}\n\t\t\t// _this.ctx.strokeStyle = _this.OriginalColor;\n\t\t\t// _this.ctx.moveTo(_strlineW, _strHeight - uni.upx2px(10)); //起点 //这里使用-10则刚好线从中中间起画\n\t\t\t// _this.ctx.lineTo(_strlineW + _this.ctx.measureText(_this.OriginalTxt).width, _strHeight - uni.upx2px(10)); //终点\n\t\t\t// _this.ctx.stroke();\n\t\t\t/*\n\t\t\tstroke() 方法会实际地绘制出通过 moveTo() 和 lineTo() 方法定义的路径。默认颜色是黑色。\n\t\t\t*/\n\t\t\t//设置价格 end\n// console.log(Iheight)\n\t\t\t//添加二维码\n\t\t\t// _strHeight += uni.upx2px(20);\n\t\t\t_this.ctx.drawImage(_QrCode.path,C_P, IHeight+C_P+C_Q, q[0]/2, q[1]/2);//nmd 小写写成大写你可真行\n\t\t\t_this.ctx.setFillStyle(_this.TitleColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(30));\n\t\t\t_this.ctx.fillText(_this.Referrer, r[0]-C_P, IHeight+C_P+C_Q+20);//二维码的height/2\n\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t_this.ctx.fillText(_this.ViewDetails, r[0]-C_P*3, IHeight+C_P+C_Q+20+20);//在上面的下一行来写\n\t\t\t//r[0]-q[0]+C_P  即img.width - qrCode.width(may150) + 30间隔\n\t\t\t/*\n\t\t\t在间距间距处以合适尺寸绘制图像\n\t\t\t\n\t\t\t在画布上定位图像，并规定图像的宽度和高度：\n\t\t\tcontext.drawImage(img,x,y,width,height);\n\t\t\t\n\t\t\tx\t在画布上放置图像的 x 坐标位置。\n\t\t\ty\t在画布上放置图像的 y 坐标位置。\n\t\t\twidth\t可选。要使用的图像的宽度。（伸展或缩小图像）\n\t\t\theight\t可选。要使用的图像的高度。（伸展或缩小图像）\n\t\t\t*/\n\t\t\t//添加二维码 end\n\n\t\t\t//添加推荐人与描述\n\t\t\t// _this.ctx.setFillStyle(_this.TitleColor);\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(30));\n\t\t\t// _this.ctx.fillText(_this.Referrer, C_P, _strHeight + q[1] / 2);//二维码的height/2\n\t\t\t// _this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t// _this.ctx.fillText(_this.ViewDetails, C_P, _strHeight + q[1] / 2 + 20);//在上面的下一行来写\n\t\t\t//添加推荐人与描述 end\n\t\t\t\n\t\t\t//延迟后渲染至canvas上\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.ctx.draw(true,(ret)=>{\n\t\t\t\t\t_this.getNewImage();\n\t\t\t\t});\n\t\t\t}, 600);\n\t\t\t\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t  canvasId: _this.CanvasID,\n\t\t\t  success: function(res) {\n\t\t\t    // 在H5平台下，tempFilePath 为 base64\n\t\t\t\t_this.thisImgSrc=res.tempFilePath\n\t\t\t\tgetApp().globalData.generateImgSrc=res.tempFilePath\n\t\t\t    // console.log(res.tempFilePath)\n\t\t\t\tconsole.log(1)\n\t\t\t\tconsole.log(getApp().globalData.generateImgSrc)\n\t\t\t\tconsole.log(1)\n\t\t\t  } \n\t\t\t})\n\t\t},\n\t\tasync getImageInfo({ imgSrc }) {\n\t\t\treturn new Promise((resolve, errs) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\terrs(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetNewImage(){//于204行被调用\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: _this.CanvasID,\n\t\t\t\tquality: 1,\n\t\t\t\tcomplete: (res) => {\n\t\t\t\t\tgetApp().globalData.generateImgSrc=res.tempFilePath\n\t\t\t\t\tconsole.log(getApp().globalData.generateImgSrc);\n\t\t\t\t\t/*\n\t\t\t\t\t     果然上面的log并没有输出  输出的是这里的log\n\t\t\t\t\t*/\n\t\t\t\t\t_this.$emit('success',res);\n\t\t\t\t}\n\t\t\t},this);\n\t\t}\n\t\t\n\t},\n\tmounted() {//挂载到实例上去之后调用。详见 注意：此处并不能确定子组件被全部挂载，如果需要子组件完全挂载之后在执行操作可以使用$nextTickVue官方文档\n\t\t_this = this;//对_this赋值为this\n\t\t_this.OnCanvas();//进入\n\t}\n};\n"],"sourceRoot":""}